<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/lib/bootstrap/bootstrap.css">
  <link rel="stylesheet" href="css/style.css">
  <title>云文件</title>
</head>
<body>
<div id="cloudApp">
  <!--导航区-->
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">云文件系统</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <form class="navbar-form navbar-left">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <button type="submit" class="btn btn-default">搜索</button>
        </form>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#" data-toggle="modal" data-target=".bs-example-modal-lg">登陆</a></li>
          <li><a href="/signUp">注册</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
               aria-expanded="false">操作<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#">个人主页</a></li>
              <li><a href="#">查看文件</a></li>
              <li><a href="#">文件操作</a></li>
              <li role="separator" class="divider"></li>
              <li><a href="#">注销</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!--登陆区-->
  <div id="loginModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog"
       aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">欢迎登陆</h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal">
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
              <div class="col-sm-10">
                <input type="email" class="form-control" id="inputEmail3" placeholder="Email"
                       v-model="loginUser.mailId">
              </div>
            </div>
            <div class="form-group">
              <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
              <div class="col-sm-10">
                <input type="password" class="form-control" id="inputPassword3" placeholder="Password"
                       v-model="loginUser.password">
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-10">
                <div class="checkbox">
                  <label>
                    <input type="checkbox"> Remember me
                  </label>
                </div>
              </div>
            </div>
            <div class="notice" v-show="loginUser.isNotice">{{loginUser.noticeMsg}}</div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" @click="goLogin()">登陆</button>
          <a href="/signUp" class="btn btn-primary">注册</a>
        </div>
      </div>
    </div>
  </div>
  <!--内容区-->
  <div class="main_content">
    <div class="container-fluid">
      <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <img src="img/folder.png" alt="...">
          <div class="caption">
            <h3>文件夹</h3>
            <p><a href="#" class="btn btn-primary" role="button">进入</a></p>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <img src="img/folder.png" alt="...">
          <div class="caption">
            <h3>文件夹</h3>
            <p><a href="#" class="btn btn-primary" role="button">进入</a></p>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <img src="img/folder.png" alt="...">
          <div class="caption">
            <h3>文件夹</h3>
            <p><a href="#" class="btn btn-primary" role="button">进入</a></p>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <img src="img/folder.png" alt="...">
          <div class="caption">
            <h3>文件夹</h3>
            <p><a href="#" class="btn btn-primary" role="button">进入</a></p>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <img src="img/folder.png" alt="...">
          <div class="caption">
            <h3>文件夹</h3>
            <p><a href="#" class="btn btn-primary" role="button">进入</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--分页区-->
  <nav aria-label="Page navigation" class="paging">
    <ul class="pagination clearfix">
      <li>
        <a href="#" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
      <li>
        <a href="#" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
</div>
<!--脚本区-->
<script src="js/lib/jquery/jquery.js"></script>
<script src="js/lib/bootstrap/bootstrap.js"></script>
<script src="js/lib/vue/vue.js"></script>
<script src="js/lib/vue/vue-resource.js"></script>

<script>

  /**
   * vue用于发送请求和数据展示
   * */
  new Vue({
    mounted(){
      $('#loginModal').on('shown.bs.modal', function () {
        $('#inputEmail3').focus()
      });
    },
    data: {
      loginUser: {
        mailId: '',
        password: '',
        noticeMsg:'',
        isNotice: false
      },

    },
    methods: {
      goLogin(){
        if (this.loginUser.mailId != '' && this.loginUser.password != '') {
          this.$http.post('api/user/login', {
            mailId: this.loginUser.mailId,
            password: this.loginUser.password
          }).then(res => {
            if (res.data.status) {
              $('#loginModal').modal('hide');
            } else {
              this.loginUser.noticeMsg = res.data.msg;
              this.loginUser.isNotice = true;
            }
          }, err => {
            console.log('数据请求错误');
          })
        } else {
          this.loginUser.noticeMsg = "请填入所有信息";
          this.loginUser.isNotice = true;
        }
      }
    }
  }).$mount('#cloudApp')
</script>
</body>
</html>